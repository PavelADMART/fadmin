# Описание класса \Rover\Fadmin\Options
* [Константы](#Константы)
* [Поля](#Поля)
* [Методы](#Методы)

> На данный момент система событий основанаая на переопределении методов, заданных в константах, считается устаревшей. В ближайших версиях появится новая, основанная на системе событий Битрикс d7.

## Константы
Константы содержат названия методов, которые могут быть определены и вызваны в унаследованном пользовательском классе при наступлении соотвествующего события.
### `EVENT__BEFORE_GET_REQUEST = 'beforeGetRequest'`
Вызывается перед обработкой реквеста. Не принимает параметров. Если возвращает `false`, то реквест не обрабатывается.
### `EVENT__BEFORE_REDIRECT_AFTER_REQUEST = 'beforeRedirectAfterRequest'`
Вызывается перед редиректом после реквеста. Не принимает параметров. Если возвращает `false`, редирект не производится.
### `EVENT__BEFORE_ADD_VALUES_FROM_REQUEST = 'beforeAddValuesFromRequest'`
Вызывается перед сохранением данных из реквеста. Не принимает параметров. Если возвращает `false` данные не сохраняются.
### `EVENT__BEFORE_ADD_VALUES_TO_TAB_FROM_REQUEST = 'beforeAddValuesToTabFromRequest'`
Вызывается перед сохранением данных из реквеста в каждый таб. Принимает параметры:
* `tab` - Объект \Rover\Fadmin\Tab таба, в котором предстоит обновить значения инпутов.

Если возвращает `false` данные в таб не сохраняются.
### `EVENT__AFTER_ADD_VALUES_FROM_REQUEST = 'afterAddValuesFromRequest'`
Ввызывается после сохранением данных из реквеста. Не принимает параметров.
### `EVENT__BEFORE_ADD_PRESET = 'beforeAddPreset'`
Вызывается перед добавлением нового пресета. Принимает и позволяет менять параметры:
* `siteId` - id сайта, для которого добавляется пресет
* `value` - имя пресета, полученное из реквета

Если вы хотите задать другое имя пресета, то сохраните его в ключе `name`. Если возвращает `false`, то пресет не добавляется.
### `EVENT__AFTER_ADD_PRESET = 'afterAddPreset'`
Вызывается после добавления нового пресета. Принимает и позволяет менять параметры:
* `siteId` - id сайта, для которого добавляется пресет
* `value` - имя пресета, полученное из реквета
* `name`  - итоговое имя, которое могло быть задано в `EVENT__BEFORE_ADD_PRESET`   
* `id`    - id пресета

### `EVENT__BEFORE_REMOVE_PRESET = 'beforeRemovePreset'`
Вызывается перед удалением пресета. Принимает и позволяет менять параметры:                                	
* `siteId` - id сайта, для которого добавляется пресет
* `id`    - id пресета
    
Если возвращает `false`, то пресет не удаляется. 
### `EVENT__AFTER_REMOVE_PRESET    = 'afterRemovePreset'`
Вызывается после удаления пресета. Получает параметр `siteId` удаленного пресета.
### `EVENT__BEFORE_MAKE_PRESET_TAB = 'beforeMakePresetTab'`
Вызывается перед созданием таба пресета. Принимает и позволяет менять параметры:
* `tab` - Объект \Rover\Fadmin\Tab таба-шаблона пресета
* `presetId`    - id пресета

Позволяет изменить параметры таба-шаблона перед созданием таба для пресета. Если возвращает `false`, то таб не создается.  
### `EVENT__AFTER_MAKE_PRESET_TAB = 'afterMakePresetTab'`
Вызывается после создания таба пресета. Принимает и позволяет менять параметры:
* `tab` - Объект \Rover\Fadmin\Tab данного пресета

### `EVENT__BEFORE_SHOW_TAB = 'beforeShowTab'`
Вызывается перед выводом таба в административной части. Получает пармаметр `tab`, содержащий объект \Rover\Fadmin\Tab выводимого таба. Если возвращает `false`, то таб не отображается.  
### `EVENT__AFTER_GET_TABS = 'afterGetTabs'`
Вызывается после получения массива всех существующих табов. Получает пармаметр `tabs`, содержащий массив объектов \Rover\Fadmin\Tab существующих табов.  
### `EVENT__BEFORE_GET_TAB_INFO = 'beforeGetTabInfo'`
Вызывается перед заданием параметров для каждого таба. Принимает и позволяет менять параметры:
* `name` - имя таба в системе
* `label` - название вкладки таба
* `icon` - иконка таба
* `description` - описание таба

## Поля
### `protected $moduleId`
Идентификатор текущего модуля
### `protected \Rover\Fadmin\Engine\TabMap $tabMap`  
Объект менеджера табов
### `protected \Rover\Fadmin\Engine\Message $message` 
Объект менеджера административных сообщений
### `protected $cache = []`
Кеш значений опций модуля
### `protected \Rover\Fadmin\Engine\Settings $settings`
Объект менеджера настроек fadmin
### `protected static $instances = []`
Сущности Fadmin-а для каждого из использующих модулей
## Методы
### `public static getInstance($moduleId)`
Возвращает объект `\Rover\Fadmin\Options` для модуля с идентификатором `$moduleId`
### `protected __construct($moduleId)`
Создает объект `\Rover\Fadmin\Options` для модуля с идентификатором `$moduleId`
### `public runEvent($name, &$params = [])` 
Запускает внутреннее событие `\Rover\Fadmin\Options`.
* `$name` - имя события
* `$params` - параметры, передаваемые в событие

### `public getPresetsCount($siteId = '')`
Возвращает кол-во существующих пресетов. Если для модуля настроена многосайтовость, то по `$siteId` - кол-во пресетов для данного сайта.
### `public getAllTabsInfo()` 
Возвращает информацию (имя в системе, имя вкладки, описание, иконка) для всех существующих табов
### `abstract public getConfig()`
Метод, возвращающий конфигурацию. Должен быть переопределен в каждом потомке.
### `public getModuleId()`
Возвращает идентификатор модуля, для которого создан объект `\Rover\Fadmin\Options`
### `public static getFullName($name, $presetId = '', $siteId = '')`
Возвращает полное внутреннее имя сущности, включающее номер пресета и сайт (если имеются)
### `public getPresetValue($inputName, $presetId, $siteId = '', $reload = false)`
Возвращает значение опции пресета