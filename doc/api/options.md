# Описание класса \Rover\Fadmin\Options
* [Константы](#Константы)
* [Поля](#Поля)
* [Методы](#Методы)

## Константы
Константы содержат названия методов, которые могут быть определены и вызваны в унаследованном пользовательском классе при наступлении соотвествующего события.
> На данный момент система событий основанаая на переопределении методов, заданных в константах, считается устаревшей. В ближайших версиях появится новая, основанная на системе событий Битрикс d7.

### `BEFORE_GET_REQUEST = 'beforeGetRequest'`
Вызывается перед обработкой реквеста. Не принимает параметров. Если возвращает `false`, то реквест не обрабатывается.
### `BEFORE_REDIRECT_AFTER_REQUEST = 'beforeRedirectAfterRequest'`
Вызывается перед редиректом после реквеста. Принимает и позволяет менять параметры:
* `url` — адрес для редиректа. 

Если возвращает `false`, редирект не производится.
### `BEFORE_ADD_VALUES_FROM_REQUEST = 'beforeAddValuesFromRequest'`
Вызывается перед сохранением данных из реквеста. Не принимает параметров. Если возвращает `false`, данные не сохраняются.
### `BEFORE_ADD_VALUES_TO_TAB_FROM_REQUEST = 'beforeAddValuesToTabFromRequest'`
Вызывается перед добавлением данных из реквеста в каждый таб. Принимает и позволяет менять параметры:
* `tab` — объект `\Rover\Fadmin\Tab` таба, в котором предстоит обновить значения инпутов.

Если возвращает `false`, данные в таб не сохраняются.
### `AFTER_ADD_VALUES_FROM_REQUEST = 'afterAddValuesFromRequest'`
Ввызывается после сохранения данных из реквеста. Принимает и позволяет менять параметры:
* `tabs` — массив объектов `\Rover\Fadmin\Tab` табов, в которых были обновлены значения инпутов.

Если возвращает `false`, редирект не производится.
### `BEFORE_ADD_PRESET = 'beforeAddPreset'`
Вызывается перед добавлением нового пресета. Принимает и позволяет менять параметры:
* `siteId` — id сайта, для которого добавляется пресет;
* `value` — имя пресета, полученное из реквета.

Если вы хотите задать другое имя пресета, то верните его в ключе `name`. Если возвращает `false`, то пресет не добавляется.
### `AFTER_ADD_PRESET = 'afterAddPreset'`
Вызывается после добавления нового пресета. Принимает и позволяет менять параметры:
* `siteId` — id сайта, для которого добавляется пресет;
* `value` — имя пресета, полученное из реквета;
* `name`  — итоговое имя, которое могло быть задано в `BEFORE_ADD_PRESET` либо сгенерировано автоматически;   
* `id`    — id пресета.

### `BEFORE_REMOVE_PRESET = 'beforeRemovePreset'`
Вызывается перед удалением пресета. Принимает и позволяет менять параметры:                                	
* `siteId` — id сайта, для которого удаляется пресет;
* `id` — id удаляемого пресета.
    
Если возвращает `false`, то пресет не удаляется. 
### `AFTER_REMOVE_PRESET    = 'afterRemovePreset'`
Вызывается после удаления пресета. Принимает и позволяет менять параметры:                                	
* `siteId` — id сайта, для которого был удалён;
* `id` — id удаленного пресета.
### `BEFORE_MAKE_PRESET_TAB = 'beforeMakePresetTab'`
Вызывается перед созданием таба пресета. Принимает и позволяет менять параметры:
* `tabParams` — массив параметров создаваемого таба-пресета, получаемый из метода `Options::getConfig()`;
* `presetId` — id пресета; 
* `presetName` — имя пресета. 

Если возвращает `false`, то таб не создается.  
### `AFTER_MAKE_PRESET_TAB = 'afterMakePresetTab'`
Вызывается после создания таба пресета. Принимает и позволяет менять параметры:
* `tab` — объект `\Rover\Fadmin\Tab` данного пресета.
### `BEFORE_SHOW_TAB = 'beforeShowTab'`
Вызывается перед отрисовкой таба. Принимает и позволяет менять параметры:
* `tab` — объект `\Rover\Fadmin\Tab` выводимого таба. Если возвращает `false`, то таб не отображается.  
### `AFTER_GET_TABS = 'afterGetTabs'`
Вызывается после получения массива всех существующих табов.  Принимает и позволяет менять параметры:
* `tabs` — массив объектов `\Rover\Fadmin\Tab` существующих табов.  
### `BEFORE_GET_TAB_INFO = 'beforeGetTabInfo'`
Вызывается перед заданием параметров для каждого таба. Принимает и позволяет менять параметры:
* `name` — имя таба в системе;
* `label` — название вкладки таба;
* `icon` — иконка таба;
* `description` — описание таба.

## Поля
### `protected $moduleId`
Идентификатор текущего модуля
### `protected \Rover\Fadmin\Engine\TabMap $tabMap`  
Объект менеджера табов
### `protected \Rover\Fadmin\Engine\Message $message` 
Объект менеджера административных сообщений
### `protected $cache = []`
Кеш значений опций модуля
### `protected \Rover\Fadmin\Engine\Settings $settings`
Объект менеджера настроек fadmin
### `protected static $instances = []`
Сущности Fadmin-а для каждого из использующих модулей
## Методы
### `public static getInstance($moduleId)`
Возвращает объект `\Rover\Fadmin\Options` для модуля с идентификатором `$moduleId`
### `protected __construct($moduleId)`
Создает объект `\Rover\Fadmin\Options` для модуля с идентификатором `$moduleId`
### `public runEvent($name, &$params = [])` (устарел)
Запускает внутреннее событие `\Rover\Fadmin\Options`.
* `$name` - имя события
* `$params` - параметры, передаваемые в событие

### `public getPresetsCount($siteId = '')`
Возвращает кол-во существующих пресетов. Если для модуля настроена многосайтовость, то по `$siteId` - кол-во пресетов для данного сайта.
### `public getAllTabsInfo()` 
Возвращает информацию (имя в системе, имя вкладки, описание, иконка) для всех существующих табов
### `abstract public getConfig()`
Метод, возвращающий конфигурацию. Должен быть переопределен в каждом потомке.
### `public getModuleId()`
Возвращает идентификатор модуля, для которого создан объект `\Rover\Fadmin\Options`
### `public static getFullName($name, $presetId = '', $siteId = '')`
Возвращает полное внутреннее имя сущности, включающее номер пресета и сайт (если имеются)
### `public getPresetValue($inputName, $presetId, $siteId = '', $reload = false)`
Возвращает значение опции пресета

> Описанный список методов может быть не полным, т.к. решение постоянно совершенствуется. Для актуальной информации смотрите код файла `\lib\options.php`.
